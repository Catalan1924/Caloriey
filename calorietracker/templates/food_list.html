{% extends 'base.html' %}

{% block title %}Today’s Calories{% endblock %}

{% block content %}
  <h1 class="text-3xl font-bold mb-6 text-center">Today’s Calories</h1>
  
  <!-- Add form -->
  <form method="post" action="{% url 'add_food' %}" class="flex gap-2 mb-6">
    {% csrf_token %}
    <input type="text" name="name" placeholder="Food name" required
           class="flex-1 border border-gray-300 rounded px-3 py-2">
    <input type="number" name="calories" placeholder="kcal" min="1" required
           class="w-24 border border-gray-300 rounded px-3 py-2">
    <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
      Add
    </button>
  </form>

  <!-- Total -->
  <div class="text-2xl font-semibold mb-4 text-center">
    Total today: {{ total }} kcal
  </div>

  <!-- List / delete -->
  {% if items %}
    <ul class="space-y-2">
      {% for item in items %}
        <li class="flex justify-between items-center bg-white p-3 rounded shadow">
          <span>{{ item.name }} ({{ item.calories }} kcal)</span>
          <form method="post" action="{% url 'delete_food' item.pk %}">
            {% csrf_token %}
            <button class="text-red-600 hover:underline text-sm">Delete</button>
          </form>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-gray-500 text-center">No food items added today.</p>
  {% endif %}

  <!-- Reset button -->
  <form method="post" action="{% url 'reset_day' %}" class="mt-6 text-center">
    {% csrf_token %}
    <button class="bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700">
      Reset Today
    </button>
  </form>
{% endblock %}